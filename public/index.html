<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google SignIn</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
        integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">

    <link rel="stylesheet" href="./css/styles.css">

</head>

<body>

    <div class="container p-5">
        <div class="row rounded-lg ali">

            <div class="col-md-4 mx-auto">
                <div class="card text-center">
                    <div class="card-header">
                        <h3>MERN TASK</h3>
                    </div>
                    <img src="./img/deadpool.jpg" alt="Logo Fazt" class="card-img-top mx-auto m-2 rounded-circle w-50">
                    <div class="card-body">
                        <div class="d-flex justify-content-center mb-2">
                            <!-- <div id="g_id_onload" data-client_id="" data-callback="handleCredentialResponse"
                                data-auto_prompt="false" data-auto_select="true">
                            </div> -->

                            <!-- <div class="g_id_signin mr-2 aria-disabled=" true" data-type="standard" data-size="large"
                                data-theme="outline" data-text="sign_in_with" data-shape="rectangular"
                                data-logo_alignment="left">
                            </div> -->

                            <!-- <button id="g_id_signout">Cerrar Sesi贸n</button> -->


                        </div>
                        <!-- Button GitHub -->
                        <!-- <div class="">
                            <a id='signin_github' aria-disabled="true">Sign in
                                GitHub</a>

                            <button id="g_id_signout">Cerrar Sesi贸n</button>


                        </div> -->
                    </div>
                </div>
            </div>
        </div>



        <!-- Google SignIn API -->
        <script src="https://accounts.google.com/gsi/client" async defer></script>

        <script>

            // Si la url es localhost usar una de las 2 url
            var url = (window.location.hostname.includes('localhost')) ? 'http://localhost:4000/api/auth/google' : 'https://mern-task-jp.herokuapp.com/api/auth/google';

            // Iniciar sesi贸n
            function handleCredentialResponse(response) {

                // const body = { id_token: response.credential }

                // fetch(url, {
                //     method: 'POST',
                //     headers: {
                //         'Content-Type': 'application/json'
                //     },
                //     body: JSON.stringify(body)
                // }).then(r => r.json()).then(resp => {
                //     console.log(resp)
                //     // localStorage.setItem('email', resp.usuario.email)
                // }
                // ).catch(console.warn)
            }

            // Cerrar Sesi贸n
            // const button = document.getElementById('g_id_signout');

            // button.onclick = async () => {

            //     // console.log(google.accounts.id)
            //     google.accounts.id.disableAutoSelect()
            //     google.accounts.id.revoke(localStorage.getItem('email'), done => {
            //         console.log('consent revoked');
            //         localStorage.clear()
            //         location.reload()
            //     });
            // }

            // var URLsearch = window.location.search;
            // console.log(URLsearch)


            //GitHub Oauth
            // fill in your cliend_id
            // const client_id = '';

            // const authorize_uri = 'https://github.com/login/oauth/authorize';
            // const redirect_uri = '';

            // const link = document.getElementById('signin_github');
            // link.href = `${authorize_uri}?client_id=${client_id}&redirect_uri=${redirect_uri}`;

        </script>
</body>

</html>